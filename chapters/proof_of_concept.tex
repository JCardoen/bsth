\section{Similar Applications}
\section{User Interface}
Considering the application is only a \acrshort{poc} there is almost no focus on the \acrlong{poc} nor on the \acrfull{ux}. To at least give a slight indication of what information needs to be displayed where, a \acrshort{ui} mock-up is created in Adobe Xd, Adobe Xd is a lightweight, rudimentary visual editor that enables designers to quickly develop and share interactive prototypes. A few example screens of the \acrshort{ui} prototype can be found below.
\begin{figure}[H]
\centering
\includegraphics[scale=0.5]{appointments_screen_ios}
\caption{User interface of the appointments and detailed view for iOS}
\end{figure}
\begin{figure}[H]
\centering
\includegraphics[scale=0.5]{appointments_screen_android}
\caption{User interface of the appointments and detailed view for Android}
\end{figure}
\begin{figure}[H]
\centering
\includegraphics[scale=0.5]{clinics_screen_ios}
\caption{User interface of the hospital venues and detailed view for iOS}
\end{figure}
\begin{figure}[H]
\centering
\includegraphics[scale=0.5]{clinics_screen_android}
\caption{User interface of the hospital venues and detailed view for Android}
\end{figure}
\section{UI Patterns}
\subsection{Displaying Lists: RecyclerView}
\cite{https://developer.android.com/guide/topics/ui/layout/recyclerview}
\section{Dependency Injection using Dagger2}
To remove the abstraction of the different methods of dependency injection, the library Dagger2 (supported by Google) is used. This library sets up the required dependencies throughout the application and registers them accordingly. Upon launching a class that requires a dependency, the Dagger2 instance will load them as specified in the AppModule. Since the architecture used in the application is \acrshort{mvvm}, the ViewModel is injected into an activity using the ViewModelFactory.
\section{Database Communication}
\subsection{Implementing Repository Pattern}
In practice, implementing the repository pattern in Android comes with some difficulties. Firstly dependency injection needs to be handled in a modular fashion, to attain the testable individual modules, the handling of dependency injection is covered in the next topic. Secondly, one must provide two types of data communications: online and offline. 
\subsubsection{Local Repository}
The local repository contains a \acrshort{dao} that maps the possible database interactions. This repository fetches the Appointment objects from the local SQLite database using the RoomDB wrapper (and a static instance referring to the AppDatabase). The result is wrapped in a LiveData type to enable the functioning of observables in the activity or fragment. This local repository is also a field of the global ViewModel object, specific to the Appointment model. 
\subsubsection{Remote Repository}
The remote repository handles all \acrshort{api} communication between the application and the IBM BlueMix server. A tool used to create HTTP requests is Retrofit. When using retrofit, the only specification required is an interface containing mapping to the different possible endpoints of the requests \cite{Retrofit}. Current WebService interface can be found below:
\begin{verbatim}
/**
 * Interface to declare endpoints of API
 */
interface WebService {
    /**
     * @GET declares an HTTP GET request
     * @Path("user") annotation on the userId parameter marks it as a
     * replacement for the {user} placeholder in the @GET path
     */
    @GET("appointments/userAppointments")
    fun getAppointments(@Header("Authorization") _authKey: String )
    : Call<List<Appointment>>
}
\end{verbatim}
An important factor in performing this request is specifying a Base Authentication header in each request that needs to be executed.
\section{Testing Application Programming Interface}
To aid in testing the database a test \acrshort{api} is programmed using a Node.js framework: Express. it is a very simple tool to create a web \acrshort{api} ready for consumption \cite{Express2019}. The testing \acrshort{api} is structured according to the entities specified in the \acrshort{uml} diagram with the corresponding relations. For this specific application there are a couple of endpoints exposed for requests:
\begin{itemize}
\item GET /appointments - this returns a JSON array containing test appointments;
\item GET /hospital - this returns information about the hospital such as address, contact details and venues;
\item GET /doctors - this fetches all the doctors present in the hospital records;
\item GET /departments - this returns all the departments available in the hospital and its venues;
\end{itemize}
An example of the JSON output can be found below:
\begin{verbatim}
[
    {
        "dateTime": "2019-03-22T22:02:37.840Z",
        "preparation": "Fuga enim non est quo",
        "doctor": {
            "firstName": "Brenda",
            "lastName": "Quitzon",
            "departments": [
                {
                    "name": "Surgery",
                    "venue": {
                        "name": "Parisian, Parker and Waelchi",
                        "additionalInformation": {
                            "website": "https://benny.net",
                            "phone": "1-346-029-0603",
                            "parking": "https://jonas.com",
                            "email": "Rossie_Paucek60@yahoo.com"
                        },
                        "address": {
                            "street": "Grimes Mission",
                            "postalCode": "50003-1879",
                            "city": "Stephanyton",
                            "country": "Malta",
                            "streetNo": 4007
                        }
                    }
                }
            ]
        }
    }
]
       
\end{verbatim}
\subsubsection{Entities}
The specific entities used throughout this application are:
\begin{itemize}
\item appointment;
\item hospital;
\item sites - the different locations of a hospital;
\item doctor;
\item patient;
\item department;
\end{itemize}
\subsubsection{Faker}
Instead of using ad random numerical combinations or lorem ipsum texts, a library called Faker is used to generate different random values such are names, addresses, e-mail addresses and phone numbers. Faker is available for almost every general purpose language and is easy to use. It is always easier to work with representative data than it is to work with 'lorem ipsum' or '123456789' \cite{DanieleFaraglia2014}.
\subsection{IBM BlueMix API}
The existing \acrshort{api} developed by IBM provides the application with a list of appointments (testing mode). An example of the JSON output can be found below:

\begin{verbatim}
[
    {
        "appointmentId": "000010130000001",
        "appointmentTime": "2017-10-16T14:14:00+02:00",
        "patientNr": 2000000420,
        "patientName": "SMITH, JULIE",
        "doctorNr": 123456,
        "doctorName": "FELDUNS, JEAN",
        "departmentId": "I",
        "departmentName": "USI",
        "siteId": "BO",
        "siteName": "Botanique",
        "appointmentReason": "Consultation Orthop√©dique",
        "appointmentInstruction": "La pendule fait",
        "appointmentStatus": "E",
        "appointmentStatusDescription": "Evaluated"
    }
]
\end{verbatim}
Notice that the \acrshort{api} response is not yet normalized as it is in the testing \acrshort{api} in Express. The testing \acrshort{api} is only used in the first steps of the application, afterwards the data from the BlueMix server is used.
\subsubsection{Authentication with the IBM BlueMix API}
To access the data of an individual user (patient in this case), the user is authenticated by setting a Basic Authentication Header for each request, a combination of userid and a password. The Authorization header of \acrfull{http} is set, including the keyword 'Basic' following a base64 string containing the username and password in the following format: username:password. If the credentials are incorrect the response will be a 401 error (Unauthorized) \cite{SwaggerHub2019}.
\section{MapWize}
MapWize is a service that digitalizes architectural plans and makes them interactive. MapWize offers an online environment in which you can easily create floor plans that can be used by the \acrshort{sdk}. In the online editor you can declare specific points of interest (PoIs) and routes from and to points. The creation of a digital map for testing purposes is out of scope for this thesis.
\subsection{MapWize SDK}
The team of developers at MapWize developed a completely open source \acrshort{sdk}, targeting the following platforms: iOS, Android, JS and \acrfull{pwa} \cite{MapWize.io2019a}. The one for Android has three versions: ready to use UI, bare-bones and an embedded WebView component.
\subsubsection{MapWize Barebone versus MapWize UI}
The bare-bones version of the \acrshort{sdk} comes as a plugin on top of the MapBox OpenGL library for Android. The Mapbox library handles the embedding of interactive vector assets into mobile applications \cite{Mabox2019}, this library is out of scope for this thesis, it is sufficient to know its function inside the MapWize \acrshort{sdk}. 
\section{Cisco Connectected Mobile Experiences integration}
The manner in which the position of a patient is retrieved is based on the nearest WiFi router of Cisco.
\subsection{Function of Cisco CMX}
\section{IndoorLocation Framework}
The IndoorLocation framework is one heavily used in conjunction with MapWize, it is a framework that allows developer to use geolocalization based on numerous \acrfull{ips} such are: GPS, beacons, Wi-Fi, Li-Fi, Ultrasounds etc \cite{IndoorLocation.io2019}.
\section{Theoretical Features}
\subsection{Mobility Indicator}
\subsection{Safety Cultivation}
\subsection{Efficient Path Mapping}


